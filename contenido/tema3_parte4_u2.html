<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
    :root {
    --bg-light: #f3f4f6;      /* Fondo claro neutro */
    --text-dark: #170047;    /* Texto principal */
    --accent-heal: #D23B78;  /* Sanaci√≥n / reparaci√≥n */
    --accent-bad: #E44700;   /* Da√±o / negativo */
    --accent-growth: #EE7D4F;/* Crecimiento / avance */
}


    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
        margin: 0;
        background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
        color: var(--text-dark);
        font-family: 'Segoe UI', Roboto, sans-serif;
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* --- FONDO --- */
    .ambient-orbs { position: absolute; width: 100%; height: 100%; z-index: 0; pointer-events: none; overflow: hidden; }
    .orb { position: absolute; border-radius: 50%; filter: blur(60px); opacity: 0.5; }
    .orb-1 { width: 300px; height: 300px; background: #c4b5fd; top: -50px; left: -50px; }
    .orb-2 { width: 300px; height: 300px; background: #a7f3d0; bottom: -50px; right: -50px; }

    /* --- HEADER --- */
    .header {
        flex-shrink: 0; height: 60px; background: rgba(255,255,255,0.8);
        backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255,255,255,0.5);
        display: flex; justify-content: space-between; align-items: center;
        padding: 0 20px; z-index: 50;
    }
    .header-title { font-weight: 800; font-size: 0.8rem; color: var(--accent-heal); text-transform: uppercase; }
    
    .pills { display: flex; gap: 8px; }
    .pill { width: 10px; height: 10px; border-radius: 50%; background: #d1d5db; transition: 0.3s; }
    .pill.active { background: var(--accent-heal); transform: scale(1.3); }

    /* --- ESCENARIO --- */
    .stage {
        flex-grow: 1; position: relative; z-index: 10;
        overflow-y: auto; padding: 20px;
        display: flex; justify-content: center; align-items: flex-start; /* Alineaci√≥n superior para scroll */
    }

    /* FASE 1: COMPARADOR RESPONSIVE */
    .comparison-wrapper {
        position: relative; width: 100%; max-width: 900px; height: 500px; /* Altura fija para desktop */
        background: white; border-radius: 15px; overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        display: flex;
    }

    .panel {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        padding: 40px; display: flex; flex-direction: column; justify-content: center;
    }
    
    .panel-bad { background: #f3f4f6; color: #4b5563; z-index: 2; clip-path: inset(0 50% 0 0); }
    .panel-good { background: white; z-index: 1; }
    
    .slider-handle {
        position: absolute; top: 0; bottom: 0; left: 50%; width: 4px;
        background: var(--accent-heal); cursor: ew-resize; z-index: 10;
        display: flex; align-items: center; justify-content: center;
    }
    .slider-btn { width: 40px; height: 40px; background: var(--accent-heal); border-radius: 50%; color: white; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 10px rgba(0,0,0,0.2); }

    .content-list li { margin-bottom: 10px; font-size: 0.95rem; }
    h2 { font-size: 1.2rem; margin-bottom: 15px; }

    /* FASE 2: NUBES (FLEX WRAP) */
    .cloud-container {
        width: 100%; max-width: 800px; min-height: 100%;
        display: none; flex-direction: column; align-items: center; justify-content: center;
        gap: 30px; padding: 20px 0;
    }

    .core-circle {
        width: 120px; height: 120px; background: white; border-radius: 50%;
        display: flex; justify-content: center; align-items: center; text-align: center;
        font-size: 0.8rem; font-weight: bold; color: var(--accent-heal);
        box-shadow: 0 0 40px rgba(139, 92, 246, 0.2); flex-shrink: 0;
        transition: 0.5s;
    }

    .cloud-wrapper {
        display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; width: 100%;
    }

    .cloud {
        background: rgba(55, 65, 81, 0.9); color: white;
        padding: 20px; border-radius: 15px; text-align: center;
        width: 220px; cursor: pointer; transition: 0.3s;
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        font-size: 0.9rem;
    }
    .cloud:hover { transform: translateY(-5px); }
    .cloud.cleared { background: white; color: #333; border: 2px solid var(--accent-bad); transform: none; cursor: default; }
    .cloud-title { color: #fbbf24; font-weight: bold; display: block; margin-bottom: 5px; }
    .cloud.cleared .cloud-title { color: var(--accent-bad); }

    /* FASE 3: JARD√çN (GRID RESPONSIVE) */
    .garden-grid {
        display: none; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px; width: 100%; max-width: 1000px; padding-bottom: 20px;
    }

    .seed-card {
        background: rgba(255,255,255,0.7); border: 2px dashed var(--accent-growth);
        border-radius: 12px; padding: 20px; text-align: center; cursor: pointer;
        transition: 0.3s;
    }
    .seed-card:hover { background: white; box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
    .seed-card.grown { background: white; border-style: solid; }
    
    .seed-icon { font-size: 2.5rem; margin-bottom: 10px; display: block; transition: 0.3s; }
    .seed-card.grown .seed-icon { transform: scale(1.2); }
    
    .seed-detail { max-height: 0; overflow: hidden; transition: 0.5s; font-size: 0.9rem; color: #555; }
    .seed-card.grown .seed-detail { max-height: 150px; margin-top: 10px; }

    /* --- FOOTER --- */
    .footer {
        flex-shrink: 0; height: 70px; background: rgba(255,255,255,0.8);
        border-top: 1px solid rgba(255,255,255,0.5);
        display: flex; justify-content: center; align-items: center; z-index: 50;
    }
    .btn-action {
        background: var(--accent-heal); color: white; border: none;
        padding: 12px 40px; border-radius: 30px; font-weight: bold;
        box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4); cursor: pointer;
    }

    /* MODAL */
    .modal-overlay {
        position: fixed; top:0; left:0; width:100%; height:100%;
        background: rgba(255,255,255,0.95); z-index: 100;
        display: none; justify-content: center; align-items: center; padding: 20px;
    }
    .modal-box {
        background: white; padding: 30px; border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1); max-width: 500px; text-align: center;
        border-top: 5px solid var(--accent-growth);
    }

    /* --- MEDIA QUERIES PARA M√ìVIL (< 768px) --- */
    @media (max-width: 768px) {
        .comparison-wrapper { 
            height: auto; min-height: 600px; 
            flex-direction: column; /* Apilar en m√≥vil si no cabe */
        }
        
        /* Ajuste radical del slider para m√≥vil: Vertical Stack */
        /* En pantallas muy estrechas, el slider horizontal es malo. 
           Mejor mostramos uno arriba y otro abajo con opacidad o scroll */
        
        .panel { 
            padding: 20px; 
            font-size: 0.9rem;
        }
        
        /* Mantener slider funcional pero ajustar textos */
        .content-list { padding-left: 20px; }
        
        /* Nubes: Ajuste de tama√±o */
        .cloud { width: 100%; max-width: 300px; }
        .core-circle { width: 100px; height: 100px; font-size: 0.7rem; margin-bottom: 20px; }
        
        /* Jard√≠n */
        .garden-grid { grid-template-columns: 1fr; }
    }
</style>
</head>
<body>

<div class="ambient-orbs">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
</div>

<!-- HEADER -->
<div class="header">
    <div class="header-title" id="title">8. PROCESOS DISCIPLINARIOS</div>
    <div class="pills">
        <div class="pill active"></div>
        <div class="pill"></div>
        <div class="pill"></div>
    </div>
</div>

<!-- STAGE -->
<div class="stage">

    <!-- FASE 1: COMPARADOR -->
    <div id="phase1" class="comparison-wrapper">
        <!-- Bueno (Fondo) -->
        <div class="panel panel-good">
            <h2 style="color:var(--accent-heal)">CASO B: CON ENFOQUE</h2>
            <ul class="content-list">
                <li>‚úÖ Investigaci√≥n considera discriminaci√≥n.</li>
                <li>‚úÖ Evaluaci√≥n justa.</li>
                <li>‚úÖ Denuncias tomadas en serio.</li>
                <li>‚úÖ Sin revictimizaci√≥n.</li>
            </ul>
            <div style="margin-top:20px; font-weight:bold; color:var(--accent-growth)">JUSTICIA RESTAURATIVA</div>
        </div>

        <!-- Malo (Overlay) -->
        <div class="panel panel-bad" id="overlay-panel">
            <h2 style="color:var(--accent-bad)">CASO A: SIN ENFOQUE</h2>
            <ul class="content-list">
                <li>‚ùå Investigaci√≥n ciega al g√©nero.</li>
                <li>‚ùå Sanciones desproporcionadas.</li>
                <li>‚ùå Denuncias minimizadas.</li>
                <li>‚ùå Revictimizaci√≥n.</li>
            </ul>
            <div style="margin-top:20px; font-weight:bold;">IMPUNIDAD</div>
        </div>

        <div class="slider-handle" id="drag-handle"><div class="slider-btn">‚Üî</div></div>
    </div>

    <!-- FASE 2: NUBES -->
    <div id="phase2" class="cloud-container">
        <div class="core-circle" id="core-status">DIGNIDAD<br>HUMANA</div>
        
        <div class="cloud-wrapper">
            <div class="cloud" onclick="bustCloud(this)">
                <span class="cloud-title">‚òÅ ESTEREOTIPOS</span>
                Funcionarios reproducen estereotipos de g√©nero, etnia o clase.
            </div>
            <div class="cloud" onclick="bustCloud(this)">
                <span class="cloud-title">‚òÅ FALTA DE EMPAT√çA</span>
                Desconocimiento total de contextos territoriales.
            </div>
            <div class="cloud" onclick="bustCloud(this)">
                <span class="cloud-title">‚òÅ BUROCRACIA</span>
                Se priorizan normas sobre derechos humanos.
            </div>
        </div>
    </div>

    <!-- FASE 3: JARD√çN -->
    <div id="phase3" class="garden-grid">
        <div style="grid-column:1/-1; text-align:center; margin-bottom:10px;">
            <h2 style="color:var(--accent-growth)">ESTRATEGIAS DE MEJORA</h2>
            <p style="font-size:0.9rem;">Toque para sembrar el cambio.</p>
        </div>

        <div class="seed-card" onclick="plantSeed(this)">
            <span class="seed-icon">üå±</span>
            <strong>ENFOQUE TRANSVERSAL</strong>
            <div class="seed-detail">Incorporar enfoque diferencial y de g√©nero en todo proceso.</div>
        </div>
        <div class="seed-card" onclick="plantSeed(this)">
            <span class="seed-icon">üíß</span>
            <strong>CAPACITACI√ìN</strong>
            <div class="seed-detail">Formaci√≥n permanente del personal.</div>
        </div>
        <div class="seed-card" onclick="plantSeed(this)">
            <span class="seed-icon">üìÑ</span>
            <strong>PROTOCOLOS</strong>
            <div class="seed-detail">Revisi√≥n y ajuste de normas internas.</div>
        </div>
        <div class="seed-card" onclick="plantSeed(this)">
            <span class="seed-icon">üë•</span>
            <strong>PARTICIPACI√ìN</strong>
            <div class="seed-detail">Inclusi√≥n activa de poblaciones protegidas.</div>
        </div>
        <div class="seed-card" onclick="plantSeed(this)">
            <span class="seed-icon">üìä</span>
            <strong>RENDICI√ìN DE CUENTAS</strong>
            <div class="seed-detail">Sistemas de seguimiento transparentes.</div>
        </div>
    </div>

</div>

<!-- FOOTER -->
<div class="footer">
    <button class="btn-action" onclick="nextStep()">CONTINUAR</button>
</div>

<!-- MODAL -->
<div class="modal-overlay" id="end-modal">
    <div class="modal-box">
        <h2 style="color:var(--accent-growth)">PLAN ACTIVADO</h2>
        <p style="margin:20px 0; color:#555;">Has completado el m√≥dulo. La construcci√≥n colectiva de compromisos es el camino para una UNP leg√≠tima.</p>
        <button class="btn-action" onclick="location.reload()">REINICIAR</button>
    </div>
</div>

<script>
    let step = 1;

    // --- SLIDER LOGIC ---
    const wrapper = document.querySelector('.comparison-wrapper');
    const overlay = document.getElementById('overlay-panel');
    const handle = document.getElementById('drag-handle');
    let active = false;

    // Eventos unificados
    const start = () => active = true;
    const end = () => active = false;
    const move = (x) => {
        if(!active) return;
        const rect = wrapper.getBoundingClientRect();
        let pos = x - rect.left;
        if(pos < 0) pos = 0;
        if(pos > rect.width) pos = rect.width;
        
        const pct = (pos / rect.width) * 100;
        overlay.style.clipPath = `inset(0 ${100-pct}% 0 0)`;
        handle.style.left = pct + '%';
    };

    handle.addEventListener('mousedown', start);
    handle.addEventListener('touchstart', start);
    window.addEventListener('mouseup', end);
    window.addEventListener('touchend', end);
    
    wrapper.addEventListener('mousemove', (e) => move(e.clientX));
    wrapper.addEventListener('touchmove', (e) => move(e.touches[0].clientX));

    // --- CLOUD LOGIC ---
    let cloudsGone = 0;
    function bustCloud(el) {
        if(el.classList.contains('cleared')) return;
        el.classList.add('cleared');
        el.innerHTML = `<strong style="color:var(--accent-bad)">‚ö† CONSECUENCIA:</strong><br>Afectaci√≥n grave a la dignidad y legitimidad.`;
        cloudsGone++;
        if(cloudsGone === 3) {
            const core = document.getElementById('core-status');
            core.style.background = "var(--accent-growth)";
            core.style.color = "white";
            core.innerHTML = "DIGNIDAD<br>RESTAURADA";
        }
    }

    // --- SEED LOGIC ---
    let plants = 0;
    function plantSeed(el) {
        if(el.classList.contains('grown')) return;
        el.classList.add('grown');
        // Change icon
        const map = {'üå±':'üå≥','üíß':'üß†','üìÑ':'‚úÖ','üë•':'ü§ù','üìä':'üìà'};
        const icon = el.querySelector('.seed-icon');
        if(map[icon.innerText]) icon.innerText = map[icon.innerText];
        
        plants++;
        if(plants === 5) setTimeout(() => document.getElementById('end-modal').style.display = 'flex', 1000);
    }

    // --- NAVIGATION ---
    function nextStep() {
        if(step < 3) {
            step++;
            updateUI();
        } else {
            document.getElementById('end-modal').style.display = 'flex';
        }
    }

    function updateUI() {
        // Hide all
        document.getElementById('phase1').style.display = 'none';
        document.getElementById('phase2').style.display = 'none';
        document.getElementById('phase3').style.display = 'none';
        
        // Show current
        const titles = ["8. PROCESOS DISCIPLINARIOS", "9. TRATO INSTITUCIONAL", "10. ESTRATEGIAS DE MEJORA"];
        document.getElementById('title').innerText = titles[step-1];
        
        // Update Pills
        document.querySelectorAll('.pill').forEach((p, i) => {
            p.classList.toggle('active', i+1 === step);
        });

        if(step === 1) document.getElementById('phase1').style.display = 'flex'; // Flex para el comparador
        if(step === 2) document.getElementById('phase2').style.display = 'flex';
        if(step === 3) document.getElementById('phase3').style.display = 'grid';
    }

    // Init clip
    overlay.style.clipPath = 'inset(0 50% 0 0)';

</script>

</body>
</html>