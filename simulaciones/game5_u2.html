<!-- LIBRER√çAS: GSAP y Fuentes -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

<style>
/* --- 1. AMBIENTACI√ìN JUR√çDICA FUTURISTA --- */
:root {
    --law-dark: #121212;
    --law-panel: #1e1e24;
    --law-violet: #9d4edd; /* Violencia G√©nero */
    --law-gold: #ffb703;    /* Justicia */
    --law-text: #e0e0e0;
    --border-glow: 0 0 10px rgba(157, 78, 221, 0.3);
}

#codex-container {
    width: 100%;
    min-height: 800px;
    background: radial-gradient(circle at top, #240046 0%, var(--law-dark) 80%);
    position: relative;
    overflow: hidden;
    font-family: 'Lato', sans-serif;
    color: var(--law-text);
    border-radius: 10px;
    border: 1px solid #333;
    display: flex;
    flex-direction: column;
}

/* Fondo animado (S√≠mbolos Legales) */
.legal-symbol {
    position: absolute;
    color: rgba(255, 255, 255, 0.03);
    font-family: 'Cinzel', serif;
    font-weight: bold;
    user-select: none;
    pointer-events: none;
    z-index: 0;
}

/* --- 2. NAVEGACI√ìN --- */
.codex-nav {
    display: flex;
    justify-content: center;
    padding: 20px;
    background: rgba(0,0,0,0.5);
    border-bottom: 1px solid var(--law-violet);
    backdrop-filter: blur(10px);
    z-index: 10;
    gap: 20px;
}

.nav-btn {
    background: transparent;
    border: 1px solid var(--law-violet);
    color: var(--law-violet);
    padding: 10px 25px;
    font-family: 'Cinzel', serif;
    font-weight: bold;
    cursor: pointer;
    transition: 0.4s;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
}

.nav-btn::after {
    content: ''; position: absolute; top:0; left:0; width:0; height:100%;
    background: var(--law-violet); transition: 0.4s; z-index: -1;
}
.nav-btn:hover::after, .nav-btn.active::after { width: 100%; }
.nav-btn:hover, .nav-btn.active { color: white; box-shadow: 0 0 20px rgba(157, 78, 221, 0.5); }

/* --- 3. SECCIONES (PANELES) --- */
.codex-section {
    flex: 1;
    display: none; /* Controlado por JS */
    padding: 20px;
    position: relative;
    z-index: 5;
    animation: fadeIn 0.8s ease-out;
    overflow-y: auto;
}
.codex-section.active { display: flex; flex-direction: column; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

/* --- VISTA 1: EL ARCHIVO (MARCO NORMATIVO) --- */
.archive-layout {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 30px;
    height: 100%;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
}

/* Lista Lateral */
.law-list {
    background: var(--law-panel);
    border-right: 2px solid var(--law-gold);
    overflow-y: auto;
    max-height: 600px;
    padding-right: 10px;
}
.law-list::-webkit-scrollbar { width: 5px; }
.law-list::-webkit-scrollbar-thumb { background: var(--law-gold); }

.law-item {
    padding: 15px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    cursor: pointer;
    transition: 0.3s;
    font-size: 0.9rem;
}
.law-item:hover { background: rgba(157, 78, 221, 0.2); padding-left: 20px; }
.law-item.selected { background: var(--law-violet); color: white; border-left: 5px solid var(--law-gold); }
.law-item strong { display: block; font-family: 'Cinzel', serif; margin-bottom: 5px; }

/* Visor Hologr√°fico */
.law-viewer {
    background: rgba(30, 30, 36, 0.8);
    border: 1px solid var(--law-violet);
    padding: 40px;
    position: relative;
    box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* Efecto de escaneo hologr√°fico */
.scan-line {
    position: absolute; top:0; left:0; width:100%; height:2px;
    background: var(--law-gold);
    box-shadow: 0 0 15px var(--law-gold);
    animation: scanDoc 3s infinite ease-in-out;
    opacity: 0.5; pointer-events: none;
}
@keyframes scanDoc { 0% { top: 0%; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

.law-title-display {
    font-family: 'Cinzel', serif;
    font-size: 2rem;
    color: var(--law-gold);
    margin-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,0.2);
    padding-bottom: 10px;
}
.law-content-display { font-size: 1.1rem; line-height: 1.6; }

/* --- VISTA 2: JUEGO 6 (EL JUEZ) --- */
.game-layout {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 900px;
    margin: 0 auto;
}

.case-file {
    background: #fff;
    color: #000;
    padding: 30px;
    width: 100%;
    max-width: 600px;
    transform: rotate(-2deg);
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    margin-bottom: 40px;
    position: relative;
    font-family: 'Courier New', monospace;
}
.case-stamp {
    position: absolute; top: 20px; right: 20px;
    border: 3px solid var(--law-violet);
    color: var(--law-violet);
    padding: 5px 10px;
    font-weight: bold;
    text-transform: uppercase;
    transform: rotate(15deg);
    opacity: 0.3;
}

.gavel-area {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 15px;
    width: 100%;
}

.law-chip {
    background: rgba(255,255,255,0.1);
    border: 1px solid var(--law-violet);
    padding: 15px;
    text-align: center;
    cursor: pointer;
    transition: 0.3s;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
}
.law-chip:hover { background: var(--law-violet); color: white; transform: scale(1.05); }
.law-chip.correct { background: var(--law-gold); color: black; border-color: white; animation: pulseWin 1s infinite; }
.law-chip.wrong { background: #ef4444; border-color: #ef4444; animation: shake 0.5s; }

.verdict-modal {
    position: absolute; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.9);
    z-index: 50;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
}
.verdict-title { font-family: 'Cinzel', serif; font-size: 2.5rem; color: var(--law-gold); margin-bottom: 20px; }
.verdict-text { font-size: 1.1rem; max-width: 600px; margin-bottom: 30px; }

/* MEDIA QUERIES */
@media (max-width: 1200px) {
    .archive-layout { grid-template-columns: 1fr; }
    .law-list { max-height: 200px; border-right: none; border-bottom: 2px solid var(--law-gold); }
    .law-viewer { padding: 20px; }
    .law-title-display { font-size: 1.5rem; }
}

@keyframes pulseWin { 0% { box-shadow: 0 0 0 0 rgba(255, 183, 3, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(255, 183, 3, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 183, 3, 0); } }
@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

</style>

<div id="codex-container">
    <!-- Fondo Generado por JS -->
    <div id="symbol-bg"></div>

    <!-- Navegaci√≥n -->
    <div class="codex-nav">
        <button class="nav-btn active" onclick="switchSection('archive')">üèõÔ∏è Archivo Normativo</button>
        <button class="nav-btn" onclick="switchSection('game')">‚öñÔ∏è Juego 6: El Juez</button>
    </div>

    <!-- SECCI√ìN 1: ARCHIVO NORMATIVO (Contenido Te√≥rico) -->
    <div id="sec-archive" class="codex-section active">
        <div class="archive-layout">
            <!-- Lista de Leyes -->
            <div class="law-list">
                <div class="law-item selected" onclick="viewLaw('const', this)">
                    <strong>Constituci√≥n Pol√≠tica 1991</strong>
                    Arts. 13, 43, 93, 11, 12, 42.
                </div>
                <div class="law-item" onclick="viewLaw('1257', this)">
                    <strong>Ley 1257 de 2008</strong>
                    Prevenci√≥n y sanci√≥n violencias.
                </div>
                <div class="law-item" onclick="viewLaw('1761', this)">
                    <strong>Ley 1761 de 2015</strong>
                    Ley Rosa Elvira Cely (Feminicidio).
                </div>
                <div class="law-item" onclick="viewLaw('1719', this)">
                    <strong>Ley 1719 de 2014</strong>
                    Violencia sexual en conflicto armado.
                </div>
                <div class="law-item" onclick="viewLaw('1801', this)">
                    <strong>Ley 1801 de 2016</strong>
                    C√≥digo Polic√≠a: Medidas inmediatas.
                </div>
                <div class="law-item" onclick="viewLaw('2175', this)">
                    <strong>Ley 2175 de 2021</strong>
                    Paridad de g√©nero 50/50.
                </div>
                 <div class="law-item" onclick="viewLaw('1542', this)">
                    <strong>Decreto Ley 1542 de 2012</strong>
                    Violencia intrafamiliar.
                </div>
                <div class="law-item" onclick="viewLaw('1941', this)">
                    <strong>Ley 1941 de 2018</strong>
                    Cr√≠menes por prejuicio.
                </div>
            </div>

            <!-- Visor de Detalles -->
            <div class="law-viewer">
                <div class="scan-line"></div>
                <div id="law-display-title" class="law-title-display">Constituci√≥n Pol√≠tica de 1991</div>
                <div id="law-display-content" class="law-content-display">
                    <ul>
                        <li><strong>Art. 13:</strong> Igualdad y no discriminaci√≥n.</li>
                        <li><strong>Art. 43:</strong> Igualdad entre hombres y mujeres.</li>
                        <li><strong>Art. 93:</strong> Bloque de constitucionalidad.</li>
                        <li><strong>Art. 11, 12, 42:</strong> Vida, dignidad y familia.</li>
                    </ul>
                    <p style="margin-top:20px; color:var(--law-gold);">"La actualizaci√≥n normativa permite a la UNP actuar conforme a los est√°ndares internacionales."</p>
                </div>
            </div>
        </div>
    </div>

    <!-- SECCI√ìN 2: JUEGO 6 (CASOS PR√ÅCTICOS) -->
    <div id="sec-game" class="codex-section">
        <div class="game-layout">
            <h2 style="color: var(--law-gold); font-family:'Cinzel', serif; text-align:center;">Juego 6: "¬øQu√© norma aplica?"</h2>
            <p style="text-align:center; margin-bottom:20px;">Analiza el caso y dictamina sentencia seleccionando la norma correcta.</p>

            <!-- Expediente -->
            <div class="case-file">
                <div class="case-stamp">CONFIDENCIAL</div>
                <h3 style="border-bottom: 2px solid black; padding-bottom: 5px;">EXPEDIENTE #00<span id="case-num">1</span></h3>
                <p id="case-text" style="font-size: 1.1rem; line-height: 1.6; margin-top: 20px;">
                    <!-- El texto se carga via JS -->
                    Cargando caso...
                </p>
            </div>

            <!-- Opciones (Leyes) -->
            <div class="gavel-area">
                <div class="law-chip" onclick="judgeCase('1761', this)">Ley 1761 (Feminicidio)</div>
                <div class="law-chip" onclick="judgeCase('1257', this)">Ley 1257 (Prevenci√≥n)</div>
                <div class="law-chip" onclick="judgeCase('1719', this)">Ley 1719 (Conflicto)</div>
                <div class="law-chip" onclick="judgeCase('1542', this)">Dec. 1542 (Intrafamiliar)</div>
                <div class="law-chip" onclick="judgeCase('1941', this)">Ley 1941 (Prejuicio)</div>
                <div class="law-chip" onclick="judgeCase('2175', this)">Ley 2175 (Paridad)</div>
            </div>
        </div>

        <!-- Modal de Veredicto -->
        <div class="verdict-modal" id="verdict-screen">
            <div class="verdict-title">‚öñÔ∏è VEREDICTO CORRECTO</div>
            <div class="verdict-text" id="verdict-details"></div>
            <button class="nav-btn" onclick="nextCase()">Siguiente Caso</button>
        </div>
    </div>
</div>

<script>
// --- 1. GENERADOR DE FONDO AMBIENTAL ---
const bgContainer = document.getElementById('symbol-bg');
const symbols = ['¬ß', '‚öñÔ∏è', '¬∂', 'üèõÔ∏è', 'üìú'];

for(let i=0; i<15; i++) {
    let el = document.createElement('div');
    el.classList.add('legal-symbol');
    el.innerText = symbols[Math.floor(Math.random() * symbols.length)];
    el.style.left = Math.random() * 100 + '%';
    el.style.top = Math.random() * 100 + '%';
    el.style.fontSize = (Math.random() * 30 + 20) + 'px';
    el.style.opacity = Math.random() * 0.1;
    bgContainer.appendChild(el);
    
    gsap.to(el, {
        y: -50, 
        rotation: 20, 
        duration: Math.random() * 5 + 5, 
        yoyo: true, 
        repeat: -1,
        ease: "sine.inOut"
    });
}

// --- 2. BASE DE DATOS DE LEYES (CONTENIDO SENSIBLE) ---
const lawsDB = {
    'const': {
        title: "Constituci√≥n Pol√≠tica de 1991",
        content: "<ul><li><strong>Art. 13:</strong> Igualdad y no discriminaci√≥n.</li><li><strong>Art. 43:</strong> Igualdad entre hombres y mujeres.</li><li><strong>Art. 93:</strong> Bloque de constitucionalidad.</li><li><strong>Art. 11, 12, 42:</strong> Vida, dignidad y familia.</li></ul>"
    },
    '1257': {
        title: "Ley 1257 de 2008",
        content: "<p>Normas de sensibilizaci√≥n, prevenci√≥n y sanci√≥n de formas de violencia y discriminaci√≥n contra las mujeres.</p>"
    },
    '1761': {
        title: "Ley 1761 de 2015 (Rosa Elvira Cely)",
        content: "<p>Por la cual se crea el tipo penal de feminicidio como delito aut√≥nomo.</p>"
    },
    '1719': {
        title: "Ley 1719 de 2014",
        content: "<p>Medidas para garantizar el acceso a la justicia de las v√≠ctimas de violencia sexual con ocasi√≥n del conflicto armado.</p>"
    },
    '1801': {
        title: "Ley 1801 de 2016",
        content: "<p>C√≥digo Nacional de Polic√≠a: Establece medidas inmediatas de protecci√≥n para evitar da√±os graves.</p>"
    },
    '2175': {
        title: "Ley 2175 de 2021",
        content: "<p>Establece medidas para garantizar la participaci√≥n paritaria de las mujeres (50/50) en las ramas del poder p√∫blico.</p>"
    },
    '1542': {
        title: "Decreto Ley 1542 de 2012",
        content: "<p>Establece que la violencia intrafamiliar NO es desistible. Se debe investigar aunque la v√≠ctima retire la denuncia.</p>"
    },
    '1941': {
        title: "Ley 1941 de 2018",
        content: "<p>Prorroga la Ley 418 y establece disposiciones sobre cr√≠menes motivados por prejuicio y discriminaci√≥n.</p>"
    }
};

// --- 3. L√ìGICA DE NAVEGACI√ìN ---
function switchSection(sec) {
    document.querySelectorAll('.codex-section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    
    document.getElementById('sec-' + sec).classList.add('active');
    event.target.classList.add('active');
}

function viewLaw(id, element) {
    // Highlight sidebar
    document.querySelectorAll('.law-item').forEach(i => i.classList.remove('selected'));
    element.classList.add('selected');
    
    // Update Content
    const title = document.getElementById('law-display-title');
    const content = document.getElementById('law-display-content');
    
    gsap.to([title, content], {opacity: 0, duration: 0.2, onComplete: () => {
        title.innerText = lawsDB[id].title;
        content.innerHTML = lawsDB[id].content;
        gsap.to([title, content], {opacity: 1, duration: 0.3});
    }});
}

// --- 4. L√ìGICA DEL JUEGO (CASOS) ---
const cases = [
    {
        text: "CASO: Una mujer ha sido agredida por su pareja. D√≠as despu√©s, ella quiere retirar la denuncia por miedo, pero la Fiscal√≠a insiste en continuar el proceso de oficio.",
        correct: '1542',
        explanation: "Correcto. El Decreto Ley 1542 de 2012 elimina el car√°cter de querellable y desistible de la violencia intrafamiliar."
    },
    {
        text: "CASO: Se investiga el asesinato de una mujer, donde existen antecedentes de violencia instrumental y control por parte del agresor. Se busca tipificarlo no como homicidio simple.",
        correct: '1761',
        explanation: "Correcto. La Ley 1761 de 2015 tipifica el Feminicidio como delito aut√≥nomo cuando existen antecedentes de dominaci√≥n."
    },
    {
        text: "CASO: Una mujer v√≠ctima del conflicto armado denuncia hechos de violencia sexual ocurridos hace 5 a√±os en una zona de combate.",
        correct: '1719',
        explanation: "Correcto. La Ley 1719 de 2014 garantiza el acceso a la justicia para v√≠ctimas de violencia sexual en el conflicto armado."
    }
];

let currentCaseIndex = 0;

function loadCase() {
    document.getElementById('case-num').innerText = currentCaseIndex + 1;
    document.getElementById('case-text').innerText = cases[currentCaseIndex].text;
    
    // Reset buttons
    document.querySelectorAll('.law-chip').forEach(c => {
        c.classList.remove('correct', 'wrong');
        c.style.pointerEvents = 'all';
    });
}

function judgeCase(lawId, btnElement) {
    if(lawId === cases[currentCaseIndex].correct) {
        // Acierto
        btnElement.classList.add('correct');
        const modal = document.getElementById('verdict-screen');
        document.getElementById('verdict-details').innerText = cases[currentCaseIndex].explanation;
        
        modal.style.display = 'flex';
        gsap.from(modal, {opacity: 0, scale: 0.8, duration: 0.3});
        
    } else {
        // Error
        btnElement.classList.add('wrong');
        gsap.to(btnElement, {x: 10, duration: 0.1, yoyo: true, repeat: 5});
    }
}

function nextCase() {
    document.getElementById('verdict-screen').style.display = 'none';
    currentCaseIndex++;
    if(currentCaseIndex < cases.length) {
        loadCase();
    } else {
        document.getElementById('case-text').innerHTML = "<strong style='color:var(--law-violet)'>¬°ENTRENAMIENTO JUR√çDICO COMPLETADO!</strong><br>Has demostrado dominio del marco normativo.";
        document.querySelector('.gavel-area').style.display = 'none';
    }
}

// Iniciar
loadCase();

</script>