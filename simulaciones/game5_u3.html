<!-- LIBRERÍAS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">

<style>
/* --- VARIABLES (PALETA 25N - CLARA) --- */
:root {
    /* Fondos */
    --bg-main: #FFFFFF;         /* Fondo limpio */
    --bg-panel: #F9FAFB;        /* Gris muy claro para contraste */
    
    /* Colores Institucionales (Imagen Referencia) */
    --brand-purple: #480241;    /* Morado oscuro (Texto principal / Logos) */
    --brand-orange: #FF9800;    /* Naranja (Acentos) */
    --brand-yellow: #FEC82F;    /* Amarillo (Manija / Detalles) */
    --brand-violet: #7B1FA2;    /* Violeta medio */
    
    /* Textos */
    --text-main: #2D2D2D;       /* Gris oscuro lectura */
    --text-purple: #480241;     /* Títulos */

    /* Estados Semánticos (Suavizados para fondo claro) */
    --state-bad-bg: #FFEBEE;    /* Fondo Rojo suave */
    --state-bad-text: #C62828;  /* Texto Rojo oscuro */
    --state-good-bg: #E8F5E9;   /* Fondo Verde suave */
    --state-good-text: #2E7D32; /* Texto Verde oscuro */
}

/* CONTENEDOR GENERAL */
#workshop-slider-v2 {
    width: 100%;
    background-color: var(--bg-main) !important;
    font-family: 'Montserrat', sans-serif;
    color: var(--text-main) !important;
    border: 1px solid #e0e0e0 !important;
    border-top: 5px solid var(--brand-yellow) !important; /* Detalle estético superior */
    border-radius: 12px;
    padding: 30px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

/* --- HEADER DE LOGOS (NUEVO) --- */
.logo-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    border-bottom: 1px solid #eee;
    padding-bottom: 15px;
    flex-wrap: wrap;
    gap: 15px;
}

.logo-img {
    height: 60px; /* Tamaño base */
    width: auto;
    object-fit: contain;
    transition: all 0.3s ease;
}

/* HEADER TEXTOS */
.slider-header { text-align: center; margin-bottom: 30px; }
.slider-title { 
    font-weight: 800; 
    font-size: clamp(1.5rem, 4vw, 2rem); 
    margin: 0; 
    text-transform: uppercase; 
    color: var(--brand-purple) !important; 
    letter-spacing: -0.5px;
}
.slider-instr { 
    font-family: 'Space Mono', monospace; 
    font-size: 0.85rem; 
    color: var(--brand-purple); 
    background: var(--brand-yellow); /* Fondo amarillo */
    padding: 6px 15px; 
    border-radius: 20px; 
    margin-top: 15px; 
    display: inline-block; 
    font-weight: 700;
}

/* --- COMPARADOR --- */
.comparison-wrapper {
    position: relative;
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    border-radius: 8px;
    box-shadow: 0 15px 40px rgba(72, 2, 65, 0.15); /* Sombra morada sutil */
    background: #ffffff !important;
    user-select: none;
    border: 1px solid #eee;
}

/* ESTILOS COMUNES DE TEXTO */
.doc-content {
    padding: 40px; 
    box-sizing: border-box;
    font-family: 'Space Mono', monospace;
    font-size: clamp(0.9rem, 2.5vw, 1.1rem); 
    line-height: 2; 
    color: var(--text-main) !important;
    margin: 0;
}

.doc-heading {
    font-weight: bold; font-size: 1.3rem; 
    color: var(--brand-violet);
    border-bottom: 2px solid #ddd; padding-bottom: 10px; margin-bottom: 20px; 
    display: block;
}

/* CAPA BASE (MALA - ROJA/GRIS) */
.layer-base {
    position: relative; 
    width: 100%;
    height: auto; 
    background-color: #fafafa !important; /* Gris muy suave */
    z-index: 1;
}

/* CAPA SUPERIOR (BUENA - BLANCA/VERDE) */
.layer-overlay {
    position: absolute; 
    top: 0; left: 0; bottom: 0; 
    width: 50%; 
    background-color: #ffffff !important;
    z-index: 2;
    overflow: hidden; 
    border-right: 4px solid var(--brand-orange); /* Línea divisoria naranja */
}

.layer-overlay .doc-content {
    width: 100vw; 
    max-width: 800px; 
}
.comparison-wrapper { container-type: inline-size; }

/* RESALTADOS (CLAROS Y LEGIBLES) */
.bad { 
    background-color: var(--state-bad-bg) !important; 
    color: var(--state-bad-text) !important; 
    text-decoration: line-through; 
    padding: 2px 6px; 
    border-radius: 4px;
}
.good { 
    background-color: var(--state-good-bg) !important; 
    color: var(--state-good-text) !important; 
    padding: 2px 6px; 
    border-radius: 4px;
    font-weight: bold;
    border-bottom: 2px solid var(--state-good-text);
}

/* HANDLE (MANIJA) */
.slider-handle {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 45px; height: 45px; 
    background: var(--brand-purple) !important; /* Botón morado */
    color: white;
    border-radius: 50%; z-index: 10; display: flex; align-items: center; justify-content: center;
    cursor: col-resize; 
    box-shadow: 0 0 0 5px rgba(255, 152, 0, 0.3); /* Aura naranja */
    border: 3px solid white;
    touch-action: none; 
    font-size: 1.2rem;
}

/* ETIQUETAS FLOTANTES */
.label-floating {
    position: absolute; bottom: 15px; 
    font-size: 0.75rem; font-weight: 800; 
    padding: 6px 12px; border-radius: 20px; color: white;
    letter-spacing: 1px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

/* CAJAS DE PASOS (NUEVO ESTILO LIGHT) */
.step-card {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    border-left: 6px solid var(--brand-violet);
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    color: var(--text-main);
    transition: transform 0.2s;
}
.step-card:hover { transform: translateY(-3px); }
.step-card strong { color: var(--brand-purple); display: block; margin-bottom: 5px; }

/* RESPONSIVE */
@media (max-width: 1200px) {
    .doc-content { padding: 25px; line-height: 1.6; } 
    .layer-overlay .doc-content { width: 100%; } 
}
@media (max-width: 600px) {
    .logo-header { justify-content: center; }
    .logo-img { height: 45px; }
    #workshop-slider-v2 { padding: 15px; }
}
</style>

<div id="workshop-slider-v2">
    
    <!-- HEADER CON LOGOS -->
    <div class="logo-header">
        <img src="../Styles/UNP I.svg" alt="Logo UNP" class="logo-img">
        <img src="../Styles/logo.png" alt="Logo Comisión" class="logo-img">
    </div>

    <div class="slider-header">
        <h2 class="slider-title">Transformación del Lenguaje</h2>
        <div class="slider-instr">↔ ARRASTRA EL CÍRCULO MORADO</div>
        <br>
        <div style="font-size: 0.9rem; color: #666; margin-top: 10px; max-width: 600px; margin-left: auto; margin-right: auto;">
            Esto es un ejemplo. Revisa a tu alrededor, en tu entorno, y analiza qué puedes encontrar.
        </div>
    </div>

    <div class="comparison-wrapper" id="comp-wrap">
        
        <!-- CAPA BASE (Define la altura) -->
        <div class="layer-base">
            <div class="doc-content">
                <span class="doc-heading">MEMORANDO #001</span>
                Para: <span class="bad">Los directores</span> de área.<br><br>
                Informar a <span class="bad">los usuarios</span> que deben actualizar datos. 
                Es deber de <span class="bad">los ciudadanos</span> y <span class="bad">sus esposas</span>.<br><br>
                <span class="bad">El jefe</span> revisará el ingreso de <span class="bad">los visitantes</span>.<br><br>
                Atentamente,<br>La Administración.
                <div class="label-floating" style="right:15px; background:var(--brand-purple);">LENGUAJE EXCLUYENTE</div>
            </div>
        </div>

        <!-- CAPA SUPERIOR (Se recorta) -->
        <div class="layer-overlay" id="overlay-layer">
            <div class="doc-content" id="overlay-content">
                <span class="doc-heading">MEMORANDO #001</span>
                Para: <span class="good">La dirección</span> de área.<br><br>
                Informar a <span class="good">la población</span> que deben actualizar datos. 
                Es deber de <span class="good">la ciudadanía</span> y <span class="good">sus cónyuges</span>.<br><br>
                <span class="good">La jefatura</span> revisará el ingreso de <span class="good">las visitas</span>.<br><br>
                Atentamente,<br>La Administración.
                <div class="label-floating" style="left:15px; background:var(--brand-orange);">LENGUAJE INCLUSIVO</div>
            </div>
        </div>

        <!-- MANIJA -->
        <div class="slider-handle" id="handle-btn">↔</div>

    </div>

    <!-- PASOS ESTILIZADOS -->
    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin-top:40px;">
        <div class="step-card">
            <strong>1. IDENTIFICAR:</strong> 
            Busca generalizaciones masculinas que invisibilizan.
        </div>
        <div class="step-card" style="border-left-color: var(--brand-orange);">
            <strong>2. TRANSFORMAR:</strong> 
            Usa sustantivos colectivos y formas abstractas.
        </div>
    </div>

</div>

<script>
const wrapper = document.getElementById('comp-wrap');
const overlay = document.getElementById('overlay-layer');
const handleBtn = document.getElementById('handle-btn');
const overlayContent = document.getElementById('overlay-content');

let isDragging = false;

function updateSlider(x) {
    const rect = wrapper.getBoundingClientRect();
    let posX = x - rect.left;

    if (posX < 0) posX = 0;
    if (posX > rect.width) posX = rect.width;

    const percent = (posX / rect.width) * 100;

    overlay.style.width = percent + "%";
    handleBtn.style.left = percent + "%";
    
    // Sincronización de ancho para efecto máscara
    overlayContent.style.width = rect.width + "px";
}

// Eventos Mouse
wrapper.addEventListener('mousedown', () => isDragging = true);
document.addEventListener('mouseup', () => isDragging = false);
document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    updateSlider(e.pageX);
});

// Eventos Touch (Móvil)
wrapper.addEventListener('touchstart', (e) => {
    isDragging = true;
    updateSlider(e.touches[0].pageX);
});
document.addEventListener('touchend', () => isDragging = false);
document.addEventListener('touchmove', (e) => {
    if (!isDragging) return;
    updateSlider(e.touches[0].pageX);
});

// Inicialización
function syncWidth() {
    overlayContent.style.width = wrapper.offsetWidth + "px";
}
window.addEventListener('resize', syncWidth);
setTimeout(syncWidth, 100);

// Animación inicial
gsap.to(handleBtn, {left: "50%", duration: 1.5, ease: "power2.inOut", onUpdate: function() {
    overlay.style.width = handleBtn.style.left;
}});

</script>